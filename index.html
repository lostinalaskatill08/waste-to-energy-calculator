<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <title>Waste-to-Energy Calculator (Multi-Pillar, with Methane & Digestate)</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: auto;
            padding: 20px;
            text-align: center;
        }
        input, button {
            margin: 10px;
            padding: 10px;
            font-size: 18px;
            width: 90%;
        }
        button {
            background-color: green;
            color: white;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: darkgreen;
        }
        #result {
            margin-top: 20px;
            font-size: 18px;
            text-align: left;
            padding: 15px;
            border: 1px solid #ccc;
            background-color: #f9f9f9;
        }
        .section {
            text-align: left;
            margin-top: 30px;
            padding: 10px;
            border-top: 1px solid #ccc;
        }
    </style>
</head>
<body>
    <h2>Waste-to-Energy Calculator (Multi-Pillar)</h2>
    <label>City Population:</label>
    <input type="number" id="population" placeholder="Enter city population" min="1">
    
    <button id="calculateButton">Calculate Energy Potential</button>
    
    <div id="result"></div>

    <div class="section">
        <h3>Assumptions (Including Gasification, Pyrolysis, Methane & Digestate):</h3>
        <ul>
            <li>Each person generates per year:
                <ul>
                    <li><b>435 kg food waste</b></li>
                    <li><b>500 kg plastic/MSW</b></li>
                    <li><b>50 kg human sewage biosolids</b></li>
                    <li><b>120 kg agricultural/forestry waste</b></li>
                </ul>
            </li>
            <li><b>Anaerobic Digestion</b> for food + human waste ‚Üí Methane & Digestate</li>
            <li><b>H-Power Incineration</b> for plastics/MSW ‚Üí Electricity</li>
            <li><b>Biomass Gasification</b> for half of agro/forestry ‚Üí Syngas ‚Üí Electricity</li>
            <li><b>Biomass Pyrolysis</b> for other half ‚Üí Biochar</li>
            <li>Energy Conversion Rates:
                <ul>
                    <li>‚öóÔ∏è 100 m¬≥ CH‚ÇÑ per ton of organic waste</li>
                    <li>‚ö° 10 kWh per m¬≥ CH‚ÇÑ</li>
                    <li>‚ôªÔ∏è 0.42 MWh/ton from MSW incineration</li>
                    <li>üî• 1.25 MWh/ton from biomass gasification</li>
                    <li>ü™® 25% biochar yield from pyrolysis</li>
                    <li>üåç 3.5 tons CO‚ÇÇ saved/ton organic waste diverted</li>
                    <li>ü¶† 0.25 tons algae per ton CO‚ÇÇ</li>
                    <li>üõ¢Ô∏è 0.6 tons biofuel per ton algae</li>
                </ul>
            </li>
            <li>üè† Household Energy Use: 10,500 kWh/year</li>
            <li>Assume <b>0.85 tonnes digestate</b> per ton of organic feedstock in AD</li>
        </ul>
    </div>
    
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            document.getElementById("calculateButton").addEventListener("click", calculateWTE);
        });

        function calculateWTE() {
            let population = parseInt(document.getElementById("population").value);

            if (isNaN(population) || population <= 0) {
                document.getElementById("result").innerHTML = "<p style='color:red;'>Please enter a valid population.</p>";
                return;
            }

            // Per-person waste assumptions (kg/year)
            let foodWastePerPerson = 435;
            let plasticMSWPerPerson = 500;
            let humanWastePerPerson = 50;
            let agWastePerPerson = 120;

            // Conversion & synergy constants
            let methaneYieldPerTon = 100;         // m¬≥ CH4 / tonne
            let electricityPerMethaneM3 = 10;     // kWh / m¬≥ CH4
            let incinerationEfficiency = 0.42;    // MWh/ton for plastic/MSW
            let gasificationEfficiency = 1.25;    // MWh/ton for biomass
            let pyrolysisBiocharYield = 0.25;     // fraction of mass to biochar
            let co2EquivalentSaved = 3.5;         // tons CO2 saved / ton organics
            let algaePerCo2 = 0.25;               // synergy ratio for algae
            let biofuelPerAlgae = 0.6;            // tons biofuel / ton algae
            let householdEnergyUsage = 10500;     // kWh/household/year
            let digestateRatio = 0.85;            // digestate from AD feedstock

            // Split agro/forestry waste between gasification & pyrolysis
            // 50% to gasification, 50% to pyrolysis
            let gasFrac = 0.5;
            let pyroFrac = 0.5;

            // Convert from kg to tonnes
            let totalFoodWaste    = (population * foodWastePerPerson) / 1000;
            let totalPlasticMSW   = (population * plasticMSWPerPerson) / 1000;
            let totalHumanWaste   = (population * humanWastePerPerson) / 1000;
            let totalAgWaste      = (population * agWastePerPerson) / 1000;

            // We'll examine a "min" (5%) to "max" (100%) processing scenario
            let minProcessing = 0.05;
            let maxProcessing = 1.0;

            function processWaste(rate) {
                let processedFoodWaste  = totalFoodWaste * rate;
                let processedPlasticMSW = totalPlasticMSW * rate;
                let processedHumanWaste = totalHumanWaste * rate;
                let processedAgWaste    = totalAgWaste * rate;

                // 1) AD for food + human waste -> methane + digestate
                let organicsForAD   = processedFoodWaste + processedHumanWaste;
                // methane
                let methaneM3       = organicsForAD * methaneYieldPerTon;
                let electricityFoodKWh = methaneM3 * electricityPerMethaneM3; // total kWh
                let electricityFoodMWh = electricityFoodKWh / 1000;           // convert to MWh
                // digestate
                let digestateMass   = organicsForAD * digestateRatio;         // in tonnes

                // 2) WTE incineration (plastics, etc.)
                // each tonne yields 0.42 MWh
                let electricityPlasticMSW = processedPlasticMSW * incinerationEfficiency; // MWh

                // 3) Biomass Gasification (gasFrac)
                let agForGasification = processedAgWaste * gasFrac; 
                let electricityAgGasif = agForGasification * gasificationEfficiency;  // MWh

                // 4) Biomass Pyrolysis (pyroFrac) -> biochar
                let agForPyrolysis = processedAgWaste * pyroFrac;
                let biocharMass = agForPyrolysis * pyrolysisBiocharYield;  // tonnes of biochar

                // Summation of electricity from AD (food/human), incineration, gasification
                let totalElectricityMWh = electricityFoodMWh + electricityPlasticMSW + electricityAgGasif;

                // Households powered
                let householdsPowered = (totalElectricityMWh * 1000) / householdEnergyUsage;

                // CO2 saved from organics
                let co2Saved = organicsForAD * co2EquivalentSaved;

                // Potential algae from that CO2
                let algaeProduced = co2Saved * algaePerCo2;

                // Potential biofuel from algae
                let biofuelProduced = algaeProduced * biofuelPerAlgae;

                return {
                    totalElectricityMWh,
                    householdsPowered,
                    digestateMass,
                    biocharMass,
                    co2Saved,
                    algaeProduced,
                    biofuelProduced
                };
            }

            let minValues = processWaste(minProcessing);
            let maxValues = processWaste(maxProcessing);

            // Display results
            document.getElementById("result").innerHTML = `
                <h3>Results (Min vs. Max Processing):</h3>
                <p><b>‚ö° Total Electricity (MWh/yr):</b> 
                   ${minValues.totalElectricityMWh.toFixed(2)} - ${maxValues.totalElectricityMWh.toFixed(2)}</p>
                <p><b>üè† Households Powered:</b> 
                   ${minValues.householdsPowered.toFixed(0)} - ${maxValues.householdsPowered.toFixed(0)}</p>
                <p><b>üíß Methane from AD (m¬≥/yr):</b><br/>
                   ${ (minValues.digestateMass / digestateRatio * methaneYieldPerTon).toFixed(2) }
                   - 
                   ${ (maxValues.digestateMass / digestateRatio * methaneYieldPerTon).toFixed(2) }</p>
                <p><b>‚ôªÔ∏è Digestate from AD (tonnes/yr):</b> 
                   ${minValues.digestateMass.toFixed(2)} - ${maxValues.digestateMass.toFixed(2)}</p>
                <p><b>üî• Biochar Mass (tonnes/yr):</b> 
                   ${minValues.biocharMass.toFixed(2)} - ${maxValues.biocharMass.toFixed(2)}</p>
                <p><b>üåç CO‚ÇÇ Saved (tons):</b> 
                   ${minValues.co2Saved.toFixed(2)} - ${maxValues.co2Saved.toFixed(2)}</p>
                <p><b>ü¶† Algae Production (tons/yr):</b> 
                   ${minValues.algaeProduced.toFixed(2)} - ${maxValues.algaeProduced.toFixed(2)}</p>
                <p><b>üõ¢Ô∏è Biofuel Potential (tons/yr):</b> 
                   ${minValues.biofuelProduced.toFixed(2)} - ${maxValues.biofuelProduced.toFixed(2)}</p>
                <p><b>Syngas from Gasification</b> is already included in the 
                   <i>Gasification Efficiency ‚Üí Electricity</i> above.</p>
            `;
        }
    </script>
</body>
</html>

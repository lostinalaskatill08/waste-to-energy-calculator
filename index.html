<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Waste-to-Energy Calculator</title>
    
    <!-- React -->
    <script src="https://unpkg.com/react@17/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone@7.21.0/babel.min.js"></script>
    
    <!-- Recharts -->
    <script src="https://unpkg.com/recharts@2.1.12/umd/Recharts.min.js"></script>
    
    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { LineChart, Line, XAxis, YAxis, Tooltip, Legend, ResponsiveContainer, BarChart, Bar } = Recharts;

        function Calculator() {
            const [population, setPopulation] = React.useState('');
            const [results, setResults] = React.useState(null);

            const constants = {
                foodWastePerPerson: 435,
                plasticMSWPerPerson: 500,
                humanWastePerPerson: 50,
                agWastePerPerson: 120,
                methaneYieldPerTon: 100,
                electricityPerMethaneM3: 10,
                incinerationEfficiency: 0.42,
                gasificationEfficiency: 1.25,
                co2EquivalentSaved: 3.5,
                algaePerCo2: 0.25,
                biofuelPerAlgae: 0.6,
                householdEnergyUsage: 10500,
                landfillSpacePerTon: 1.5,
                electricityRate: 0.12
            };

            const calculateResults = (processingRate) => {
                if (!population) return null;
                
                const pop = parseFloat(population);
                
                // Basic waste calculations (tons)
                const totalFoodWaste = (pop * constants.foodWastePerPerson) / 1000;
                const totalPlasticMSW = (pop * constants.plasticMSWPerPerson) / 1000;
                const totalHumanWaste = (pop * constants.humanWastePerPerson) / 1000;
                const totalAgWaste = (pop * constants.agWastePerPerson) / 1000;

                // Processed amounts with rate
                const processedFoodWaste = totalFoodWaste * processingRate;
                const processedPlasticMSW = totalPlasticMSW * processingRate;
                const processedHumanWaste = totalHumanWaste * processingRate;
                const processedAgWaste = totalAgWaste * processingRate;

                // Energy calculations
                const methaneFood = processedFoodWaste * constants.methaneYieldPerTon;
                const methaneHuman = processedHumanWaste * constants.methaneYieldPerTon;
                const electricityFood = methaneFood * constants.electricityPerMethaneM3;
                const electricityHuman = methaneHuman * constants.electricityPerMethaneM3;
                const electricityPlasticMSW = processedPlasticMSW * constants.incinerationEfficiency * 1000;
                const electricityAgWaste = processedAgWaste * constants.gasificationEfficiency * 1000;

                const totalEnergy = (electricityFood + electricityHuman + electricityPlasticMSW + electricityAgWaste) / 1000;
                const annualRevenue = totalEnergy * 1000 * constants.electricityRate;

                // Environmental calculations
                const co2Saved = (processedFoodWaste + processedHumanWaste) * constants.co2EquivalentSaved;
                const landfillSpaceSaved = (processedFoodWaste + processedPlasticMSW + processedHumanWaste) * constants.landfillSpacePerTon;
                const algaeProduced = co2Saved * constants.algaePerCo2;
                const biofuelProduced = algaeProduced * constants.biofuelPerAlgae;

                return {
                    totalEnergy,
                    householdsPowered: totalEnergy * 1000 / constants.householdEnergyUsage,
                    landfillSpaceSaved,
                    co2Saved,
                    algaeProduced,
                    biofuelProduced,
                    annualRevenue
                };
            };

            const handleCalculate = () => {
                setResults({
                    min: calculateResults(0.05),
                    max: calculateResults(1.0)
                });
            };

            return (
                <div className="p-4 max-w-4xl mx-auto">
                    <h1 className="text-2xl font-bold mb-4">Waste-to-Energy Calculator</h1>
                    
                    <div className="mb-4">
                        <input
                            type="number"
                            value={population}
                            onChange={(e) => setPopulation(e.target.value)}
                            placeholder="Enter city population"
                            className="border p-2 mr-2"
                        />
                        <button 
                            onClick={handleCalculate}
                            className="bg-blue-500 text-white px-4 py-2 rounded"
                        >
                            Calculate
                        </button>
                    </div>

                    {results && (
                        <div className="space-y-4">
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div className="bg-white p-4 rounded shadow">
                                    <h2 className="font-bold mb-2">Energy Generation</h2>
                                    <p>‚ö° Total Energy: {results.min.totalEnergy.toFixed(1)} - {results.max.totalEnergy.toFixed(1)} MWh</p>
                                    <p>üè† Households: {Math.floor(results.min.householdsPowered)} - {Math.floor(results.max.householdsPowered)}</p>
                                    <p>üí∞ Revenue: ${(results.min.annualRevenue/1000000).toFix
